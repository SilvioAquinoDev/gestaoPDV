README - Sistema de GestÃ£o PDV
ğŸ“‹ DescriÃ§Ã£o do Projeto
Sistema web para GestÃ£o de Ponto de Venda (PDV) que realiza abertura e fechamento de caixa, integrado com o sistema de cardÃ¡pio online cardapio.ai via webhooks para recebimento automÃ¡tico de vendas.

ğŸš€ Funcionalidades
Principais
Abertura de Caixa: Registro inicial do caixa com valor de fundo

Fechamento de Caixa: Encerramento com relatÃ³rio consolidado

Dashboard: VisualizaÃ§Ã£o em tempo real do status do caixa

Recebimento de Vendas: IntegraÃ§Ã£o automÃ¡tica via webhook do cardapio.ai

HistÃ³rico de Vendas: Consulta de todas as transaÃ§Ãµes processadas

TÃ©cnicas
Interface responsiva e intuitiva

Armazenamento seguro no Supabase

Processamento assÃ­ncrono de webhooks

ValidaÃ§Ã£o de dados em tempo real

ğŸ›  Tecnologias Utilizadas
Frontend: HTML5, CSS3, JavaScript (ES6+)

Backend: JavaScript (Node.js environment)

Banco de Dados: Supabase (PostgreSQL)

AutenticaÃ§Ã£o: Supabase Auth

API: RESTful com Supabase Client

Deploy: Hospedagem compatÃ­vel com serviÃ§os serverless

ğŸ“¦ Estrutura do Projeto
text
gestao-pdv/
â”œâ”€â”€ index.html              # PÃ¡gina principal/dashboard
â”œâ”€â”€ abertura-caixa.html     # Tela de abertura de caixa
â”œâ”€â”€ fechamento-caixa.html   # Tela de fechamento de caixa
â”œâ”€â”€ historico-vendas.html   # HistÃ³rico de vendas
â”œâ”€â”€ configuracao.html       # ConfiguraÃ§Ãµes do sistema
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.css           # Estilos principais
â”‚   â””â”€â”€ responsive.css      # Estilos responsivos
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ supabase-client.js  # ConfiguraÃ§Ã£o do Supabase
â”‚   â”œâ”€â”€ auth.js             # Gerenciamento de autenticaÃ§Ã£o
â”‚   â”œâ”€â”€ caixa.js            # LÃ³gica de abertura/fechamento
â”‚   â”œâ”€â”€ vendas.js           # Gerenciamento de vendas
â”‚   â”œâ”€â”€ webhook.js          # Processamento de webhooks
â”‚   â””â”€â”€ utils.js            # FunÃ§Ãµes utilitÃ¡rias
â””â”€â”€ webhook/
    â””â”€â”€ index.js            # Endpoint para receber webhooks
âš™ï¸ ConfiguraÃ§Ã£o e InstalaÃ§Ã£o
PrÃ©-requisitos
Conta no Supabase

Conta no cardapio.ai

Servidor de hospedagem com suporte a JavaScript

1. ConfiguraÃ§Ã£o do Supabase
Crie um novo projeto no Supabase

Execute o seguinte script SQL para criar as tabelas:

sql
-- Tabela de caixas
CREATE TABLE caixas (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  data_abertura TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  data_fechamento TIMESTAMP WITH TIME ZONE,
  valor_abertura DECIMAL(10,2) NOT NULL,
  valor_fechamento DECIMAL(10,2),
  status VARCHAR(20) DEFAULT 'aberto',
  usuario_id UUID REFERENCES auth.users(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Tabela de vendas
CREATE TABLE vendas (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  caixa_id UUID REFERENCES caixas(id),
  pedido_id VARCHAR(100) NOT NULL,
  valor_total DECIMAL(10,2) NOT NULL,
  forma_pagamento VARCHAR(50),
  status VARCHAR(50) DEFAULT 'confirmada',
  dados_pedido JSONB,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Habilitar RLS (Row Level Security)
ALTER TABLE caixas ENABLE ROW LEVEL SECURITY;
ALTER TABLE vendas ENABLE ROW LEVEL SECURITY;

-- PolÃ­ticas de seguranÃ§a
CREATE POLICY "UsuÃ¡rios podem gerenciar seus caixas" ON caixas
  FOR ALL USING (auth.uid() = usuario_id);

CREATE POLICY "UsuÃ¡rios podem ver suas vendas" ON vendas
  FOR ALL USING (EXISTS (
    SELECT 1 FROM caixas 
    WHERE caixas.id = vendas.caixa_id 
    AND caixas.usuario_id = auth.uid()
  ));
2. ConfiguraÃ§Ã£o da AplicaÃ§Ã£o
Clone o repositÃ³rio:

bash
git clone [url-do-repositorio]
cd gestao-pdv
Configure as variÃ¡veis de ambiente no arquivo js/supabase-client.js:


Configure o webhook no cardapio.ai:

URL do webhook: https://seudominio.com/webhook

Eventos: pedido.confirmado, pedido.cancelado

ğŸ”§ Uso do Sistema
Abertura de Caixa
Acesse a tela "Abrir Caixa"

Informe o valor inicial do fundo de caixa

Confirme a abertura

Recebimento de Vendas
As vendas sÃ£o recebidas automaticamente via webhook

Cada venda Ã© vinculada ao caixa aberto atual

Status atualizado em tempo real no dashboard

Fechamento de Caixa
Acesse a tela "Fechar Caixa"

Sistema calcula automaticamente:

Total de vendas

Valor esperado em caixa

DiferenÃ§a (se houver)

Confirme o fechamento

ğŸ”’ SeguranÃ§a
AutenticaÃ§Ã£o via Supabase Auth

Row Level Security no banco de dados

ValidaÃ§Ã£o de payloads de webhook

CORS configurado adequadamente

Dados sensÃ­veis armazenados de forma segura

ğŸ“± Responsividade
O sistema Ã© totalmente responsivo e funciona em:

ğŸ’» Desktop

ğŸ“± Smartphones

ğŸ–¥ï¸ Tablets

ğŸš€ Deploy
OpÃ§Ã£o 1: Netlify/Vercel
Conecte seu repositÃ³rio Git

Configure as variÃ¡veis de ambiente

Deploy automÃ¡tico

OpÃ§Ã£o 2: Hospedagem Tradicional
FaÃ§a upload dos arquivos para seu servidor

Configure o Supabase

Configure o endpoint de webhook

ğŸ› SoluÃ§Ã£o de Problemas
Webhook nÃ£o recebe vendas
Verifique a URL configurada no cardapio.ai

Confirme se o endpoint estÃ¡ acessÃ­vel

Verifique os logs do servidor

Caixa nÃ£o abre/fecha
Confirme a conexÃ£o com o Supabase

Verifique as permissÃµes RLS

Confirme se o usuÃ¡rio estÃ¡ autenticado

Erros de autenticaÃ§Ã£o
Verifique as chaves do Supabase

Confirme se o usuÃ¡rio estÃ¡ logado

Limpe cache e cookies do navegador

ğŸ¤ ContribuiÃ§Ã£o
Fork o projeto

Crie uma branch para sua feature (git checkout -b feature/AmazingFeature)

Commit suas mudanÃ§as (git commit -m 'Add some AmazingFeature')

Push para a branch (git push origin feature/AmazingFeature)

Abra um Pull Request

ğŸ“„ LicenÃ§a
Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo LICENSE para mais detalhes.

ğŸ“ Suporte
Em caso de dÃºvidas ou problemas:

Consulte a documentaÃ§Ã£o do Supabase

Verifique a documentaÃ§Ã£o do cardapio.ai

Abra uma issue no repositÃ³rio do projeto
